<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>The necessary impressive demo</title>
		<style>
			/* styles are just there for vertical align and auto adaptative content */
			body { /* missing good old time */
				display: table;
				height: 100%;
				position: absolute;
				margin: 0;
				border: 0;
				padding: 0;
				width: 100%;
			}
			body > div {
				display: table-row;
			}
			body > div > * {
				display: table-cell;
				vertical-align: middle;
				text-align: center;
			}
		</style>
		<!-- they said "the only script in your head". Well, if it's light, why not inline it ? -->
		<script>
(function(a){var c=document.createElement,d=document.getElementsByTagName("SCRIPT")[0],e=/MSIE/.test(navigator.userAgent),f=function(a){var b=document.createElement("script");b.src=a,e===!0?b.async=!1:b.async=!0,b.className="lazyloadlight",e===!0?b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&(b.onreadystatechange=null,g(a))}:b.onload=b.onerror=function(){g(a)},d.parentNode.appendChild(b)},g=function(a){k[a]=1,h(a)},h=function p(a){if(j[a])for(var b in j[a])if(b!="callback"&&k[b]<1)return!1;switch(k[a]){case 1:for(var b in i[a])if(b==="callback"){for(var c=0;c<i[a].callback.length;c++)setTimeout(i[a].callback[c],0);i[a].callback=[]}else delete i[a][b],p(b);break;case 0:return!1;case-1:k[a]=0,f(a);break;default:throw new Error("sorry ?")}},i={},j={},k={},l="",m=/^http|\/\//;"use strict";a.lazyLoadLight=function(a,b){var c,d,e,f,g;for(f=0,g=a.length;f<g;f++)c=a[f].match(m)?a[f]:l+a[f],i[c]||(i[c]={},j[c]={},k[c]=k[c]||-1),d?(i[d][c]=!0,j[c][d]=!0):e=c,d=c;i[c].callback||(i[c].callback=[]),i[c].callback.push(b),h(e)},a.lazyLoadLight.setBasePath=function(a){l=a}})(this.YOUR_NAMESPACE||this,this)
		</script>
	</head>
	<body>
		<h1>Look at the source, Luke</h1>
		<div id="blocking-script">Never-responding script was called, so this block is never enhanced but the rest of the page works fine</div>
		<script>
			//debugger;
			lazyLoadLight(
				// list dependancies
				[	"http://code.jquery.com/jquery-latest.min.js",
					'http://blackhole.webpagetest.org/never-responding.js' // thanks to Pat Neeman for providing this host
				],
				function() {
						$('#blocking-script').html('This content has been enhanced after the timeout of a never-responding script');
					}
				);
		</script>
		
		<div id="container"><div><progress>Not yet enhanced content</progress></div></div>
		<script>
			lazyLoadLight(
				// list dependancies
				[	"http://code.jquery.com/jquery-latest.min.js",
					"http://underscorejs.org/underscore-min.js"
				],
					function() {
						// oh yeah, we needed jQuery to do that !
						$('#container').html('Content lazily enhanced');
					}
				);
		</script>
		<div id="container2"><div><progress>Not yet enhanced content 2</progress></div></div>
		<script>
			lazyLoadLight(
				// list dependancies
				[	"http://code.jquery.com/jquery-latest.min.js"
				],
					function() {
						// oh yeah, we needed jQuery to do that too !
						$('#container2').html('Content 2 lazily enhanced, without re-downloading jQuery');
					}
				);
		</script>

		<div id="perf-killers"><div>
			Can even lazy load famous performance killers : 
			<div id="fb-root"></div>
			<div class="g-plusone" data-size="medium" data-href="https://plus.google.com/112103998865541703481/posts" id="plusone"></div>
		</div></div>
		<script>
			// works with most of the usual perf killers : buttons, trackers, widgets and so on
			lazyLoadLight(
				[	'https://apis.google.com/js/plusone.js',
					'//connect.facebook.net/fr_FR/all.js#xfbml=1'
				],
				function() {}
			);
		</script>
	</body>
</html>